<dl>
	<dt>Username</dt>
	<dd>{{.DisplayUser.Username}}</dd>
	<dt>Following</dt>
	<dd>
		{{range .DisplayUser.Following}}
			<a href="/~{{urlquery .}}">{{.}}</a>
		{{end}}
	</dd>
	<dt>Followers</dt>
	<dd>
		{{range .DisplayUser.Followers}}
			<a href="/~{{urlquery .}}">{{.}}</a>
		{{end}}
	</dd>
	<dt>Friends</dt>
	<dd>
		{{range .DisplayUser.Friends}}
			<a href="/~{{urlquery .}}">{{.}}</a>
		{{end}}
	</dd>
</dl>

{{if and .User.IsAuthenticated (ne .User.Model.Username .DisplayUser.Username)}}
	{{if .IsFollowing}}
		<form action="/~{{urlquery .DisplayUser.Username}}/unfollow" method="post">
			<input type="hidden" value="{{.CSRF}}" name="_csrf_token" />
			<button class="btn btn-primary">
				<span class="glyphicon glyphicon-minus" aria-hidden="true"></span>
				Unfollow
			</button>
		</form>
	{{else}}
		<form action="/~{{urlquery .DisplayUser.Username}}/follow" method="post">
			<input type="hidden" value="{{.CSRF}}" name="_csrf_token" />
			<button class="btn btn-primary">
				<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
				Follow
			</button>
		</form>
	{{end}}

	{{if .IsFriend}}
		<form action="/~{{urlquery .DisplayUser.Username}}/friend/cancel" method="post">
			<input type="hidden" value="{{.CSRF}}" name="_csrf_token" />
			<button class="btn btn-success">
				<span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
				Unriend
			</button>
		</form>
	{{else}}
		{{if .HasRequestedFriendship}}
			Friendship already requested!
			<form action="/~{{urlquery .DisplayUser.Username}}/friend/confirm" method="post">
				<input type="hidden" value="{{.CSRF}}" name="_csrf_token" />
				<button class="btn btn-success">
					<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
					Accept
				</button>
			</form>
			<form action="/~{{urlquery .DisplayUser.Username}}/friend/reject" method="post">
				<input type="hidden" value="{{.CSRF}}" name="_csrf_token" />
				<button class="btn btn-danger">
					<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
					Reject
				</button>
			</form>
		{{else}}
			{{if .FriendRequestPending}}
				<button class="btn btn-disabled">
					Friendship request pending
				</button>
			{{else}}
				<form action="/~{{urlquery .DisplayUser.Username}}/friend/request" method="post">
					<input type="hidden" value="{{.CSRF}}" name="_csrf_token" />
					<button class="btn btn-success">
						<span class="glyphicon glyphicon-heart" aria-hidden="true"></span>
						Friend
					</button>
				</form>
			{{end}}
		{{end}}
	{{end}}
{{end}}